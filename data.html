<!DOCTYPE HTML>
<html lang="en">

	<head>
			<!-- <link href='https://fonts.googleapis.com/css?family=Ruda:400,700|Cantarell:400,700,400italic,700italic' rel='stylesheet' type='text/css'> -->
			<!-- <link href='https://fonts.googleapis.com/css?family=Bitter' rel='stylesheet' type='text/css'> -->
				<link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">
			<meta charset="utf-8">
			<meta name="viewport" content="width=device-width, initial-scale=1"/>
			<meta name="keywords" content="maps,cartography, hazardous waste trade"/>
			<title>Hazardous Waste Importers AND Exporters</title>

			<!--put Bootstrap stylesheet links above style.css-->
			<link rel="stylesheet" href="CSS/bootstrap.min.css">
			<link rel="stylesheet" href="CSS/bootstrap-theme.min.css">
			<link rel="stylesheet" href="CSS/style.css">
			<script type="text/javascript" src="lib/jquery-1.11.3.min.js"></script>
			<script type="text/javascript" src="lib/bootstrap.min.js"></script>
			<script type="text/javascript" src="lib/d3.js" charset="utf-8"></script>
			<script type="text/javascript" src="lib/queue.js"></script>
			<script type="text/javascript" src="lib/topojson.v1.min.js"></script>
			<script type="text/javascript" src="lib/tip.js"></script>
			<script src="lib/w3HTMLinclude.js"></script>

	</head>

	<body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-87476640-1', 'auto');
  ga('send', 'pageview');

</script>
	<div w3-include-html="nav.html"></div>
	<script>
	w3IncludeHTML();
	</script>
	<div class="center">
		<div class="jumbotron">
				<div class="container">
						<h1>Data Entry</h1>
				</div>
		</div>
	</div>


		<div class="container">
      <div class = "row">

			<div class="col-md-12" id = "bodyText"><br><h4>Data Entry and Cleaning Process</h4>
				<h5>Using the manifests we obtained from the EPA, we assembled a spreadsheet of data that included importer name and location, exporter name and location, various EPA and United Nations codes, waste type, waste amounts, and units the waste was reported in, along with port of entry city and any discrepancies that were either noted on the manifest or were noticed upon entering the data into our spreadsheet. The dataset we have assembled to-date can be downloaded <a href="hmm/index.html">here</a>.
				</h5>
				<br><br>

				<h5>Before we could use our dataset to create maps and other visuals, we had to clean the dataset. Below are the steps we took to process the dataset.
					<ul>
						<li>Clear 2006, 2014 data.</li>
						<li>Clear anything with a quantity</li>
						<li>Convert quantities with (EST) or (APPROX) to whatever comes before (EST) or (APPROX)</li>
						<li>Clear anything without unit</li>
						<li>Clear anything without an exporter address</li>
						<li>Clear anything without an importer address (rare if any)</li>
						<li>Standardize importer addresses to match lookup table (e.g. 625 WANDA STREET should be 625 WANDA ST) or whatever. Probably the most work...</li>
						<li>Lookup importer lat/longs</li>
						<li>Lookup exporter lat/longs</li>
						<li>QA/QC any lat/long errors</li>
						<li>Standardize EPA keys</li>
						<li>Create exporter keys (E + lat first two digits + A + long last four decimal digits)</li>
						<li>Convert units</li>
						<li>Clear anything without description AND UN code</li>
						<li>Lookup UN codes</li>
						<li>If waste description but no UN Code, UN Code Description = Not provided</li>
						<li>If UN Code but no waste description, UN Code Description = Unknown</li>
						<li>Lookup expected management codes</li>
						<li>If no mgmt code, then "Not provided"</li>
						<li>If multiple mgmt codes (e.g. H040;H141), then "Multiple management methods."</li>
						<li>If unknown code (e.g. "A2342"), then "Unknown"</li>
						<li>Lookup company (I don't think I have a lookup table, but you can create one by taking facility name and company column from existing complete dataset, e.g. the one I just finished) and filtering by unique values...</li>
						<li>Map</li>
						<li>QA/QC lat/long errors</li>
					</ul>

				 </h5>

				<br>
			</div>
    </div>
		</div>
<br><br>

	</body>
<script>
	var origW = $("#mercuryMap").width()
	var origH = $("#mercuryMap").height()
	var colW = $(".col-md-12").width()
	var ratio = origW/origH
	ratio = isNaN(ratio) ? 1.3 : ratio
	var scalarW = window.innerWidth < 500 ? colW : origW //scale based on screen size
	scalarW = scalarW == 0 ? 721 : scalarW

	$("#mercuryMap").width(scalarW)


	var scalarH = window.innerWidth < 500 ? scalarW/ratio : origH //scale based on screen size
	scalarH = scalarH == 0 ? scalarW/ratio : scalarH
	$("#mercuryMap").height(scalarH)
	console.log(colW, origW, scalarW, origH, scalarH, ratio)
</script>


</html>
