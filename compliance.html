<!DOCTYPE HTML>
<html lang="en">

	<head>
			<!-- <link href='https://fonts.googleapis.com/css?family=Ruda:400,700|Cantarell:400,700,400italic,700italic' rel='stylesheet' type='text/css'> -->
			<!-- <link href='https://fonts.googleapis.com/css?family=Bitter' rel='stylesheet' type='text/css'> -->
				<link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">
				<link href="https://fonts.googleapis.com/css?family=Doppio+One" rel="stylesheet">
			<meta charset="utf-8">
			<meta name="viewport" content="width=device-width, initial-scale=1"/>
			<meta name="keywords" content="maps,cartography, hazardous waste trade"/>
			<title>Are waste processors in compliance?</title>

			<!--put Bootstrap stylesheet links above style.css-->
			<link rel="stylesheet" href="CSS/bootstrap.min.css">
			<link rel="stylesheet" href="CSS/style2a.css">
			<script type="text/javascript" src="lib/jquery-1.11.3.min.js"></script>
			<script type="text/javascript" src="lib/bootstrap.min.js"></script>
			<script type="text/javascript" src="lib/d3.js" charset="utf-8"></script>
			<script type="text/javascript" src="lib/queue.js"></script>
			<script type="text/javascript" src="lib/topojson.v1.min.js"></script>
			<script type="text/javascript" src="lib/tip.js"></script>
			<script type="text/javascript" src="https://npmcdn.com/@turf/turf/turf.min.js"></script>
			<script src='lib/nprogress.js'></script>
			<link rel='stylesheet' href='CSS/nprogress.css'/>
			<script src="lib/w3HTMLinclude.js"></script>
	<style>
		.handle{
			cursor:pointer;
		}
		rect:hover{
			cursor: pointer;
		}
		.ticks {
  font: 10px sans-serif;
}

.track,
.track-inset,
.track-overlay {
  stroke-linecap: round;
}

.track {
  stroke: #000;
  stroke-opacity: 0.3;
  stroke-width: 10px;
}

.track-inset {
  stroke: #ddd;
  stroke-width: 8px;
}

.track-overlay {
  pointer-events: stroke;
  stroke-width: 50px;
  stroke: transparent;
  cursor: crosshair;
}

.handle {
  fill: #fff;
  stroke: #000;
  stroke-opacity: 0.5;
  stroke-width: 1.25px;
}
	</style>
	</head>

	<body>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-87476640-1', 'auto');
  ga('send', 'pageview');

</script>
	<div w3-include-html="nav.html"></div>
	<script>
	w3IncludeHTML();
	</script>
	
		<div class="jumbotron">
						<h1>Are waste processors in compliance?</h1>
		</div>

			<div class="col-md-8">
			
				<div class="col-md-12" id="map"></div>
				<div class="col-md-12" id = "timeDiv"><p></div>

			</div>
			<div class="col-md-4">
				<div class="col-md-12">
						<h5>Hazardous waste processing facilities are required to follow operating guidelines set by the EPA. Data from the US EPA Enforcement and Compliance History Online (<div class="definition" style="cursor:help">ECHO<span class="tooltiptext"></span></div>) database shows whether plants have had any violations within the past 12 quarters. This map correlates compliance status with the number of shipments the facilities received from 2007 to 2012. You can filter to a specific time period by clicking on a date on the timeline. Some facilities of note are those owned by the firm <a href="imports.html">Clean Harbors</a>. Its Kimball, Nebraska and El Dorado, Arkansas sites are two of the top importers in the US, but these sites are regularly out of compliance. This raises <a href="demographics.html">environmental justice</a> concerns.</h5>

						<h6><i>*Indicates plant-wide status, not necessary imported waste processing.</i></h6>
						<br><br>
				</div>

				<div class="col-md-6" id="leftLegend"></div>
				<div class="col-md-6" id="rightLegend"></div>
			</div>
				<div class="col-md-5" id = "bodyText">
					<div class="col-md-12">
							<h5>Veolia is a French transnational corporation involved in the North American hazardous waste trade, but infamously
								known as the company in part responsible for the Flint water
								crisis. In Los Angeles County, Veolia has a waste recycling
								and disposal facility. Despite the “green” face recycling
								facilities often put forth, this facility has been subject to
								numerous recurring violations.
								Urban geographer Laura Pulido (2015) describes <a href="http://journals.sagepub.com/doi/abs/10.1177/0309132514563008" target="_blank">the
								significance of white supremacy</a> in producing environmental
								injustices. Using the example of a battery recycling facility
								in majority-Latinx East Los Angeles, Pulido argues that white
								supremacy does not simply describe hate groups such as the
								KKK. Rather, it is an attitude of superiority that is much
								more ubiquitous, which
								corporations put into
								practice by knowingly
								polluting black and brown
								communities.
								The case of Veolia extends
								Pulido’s argument to a
								transnational level. Not
								only does the corporation
								act in continued noncompliance,
								but it is enabled
								to do so through transnational
								trade agreements.
								They import from 15 sites,
								mostly on the US-Mexico
								border. Veolia is not the exception. There were 31 hazardous waste generators in LA County that were in significant non-compliance with RCRA over the past three years. Only one of these was in a majority white neighborhood.
							</h5>
					</div>		
					<div class="col-md-12 leg"></div>
				</div>
				<div class="col-md-7">
					<div class="col-md-12" id="LAmap"></div>
					<br><br><br>
				</div>

	
					<script>
					//global variables
					var svg, zoomer, projection, width100, height100, colorKey, mapData = {}, dates = [], max, circleMax, path, time, firstTime = true;
					var defaultColor = "#D1D3D4", exDefaultColor = "#4D4D4F"
							var defaultStroke = {"stroke": "#262626", "opacity": 1}
					var zoom = d3.behavior.zoom()
					    .scaleExtent([1, 12])
					    .on("zoom",zoomer);
					var u, b, imp, exp;
					var tooltip = d3.tip()
					  .attr('class', 'd3-tip')
					  .offset([-5, 0])
					  .html(function(d, status, time) {
					    return "<span style='color:white'>" + d.name + ": "+ format(d.shipments)+" shipments <br>"+time+": "+plegend[status]+"</span>";
					  })
					var flanneryScale;
					var format = d3.format(",.0f")  ;
					var plegend={"Significant Noncomplier": "Significant Non-Compliance", "Violation": "In Violation", "No Viol": "No violation", "null": "Unknown status"}
					var windowWidth = window.innerWidth
					var smallCircle 
					var bigCircle 
					var mapScalar 
					var mapHeightRatio
					function scaler (){
						if (windowWidth < 500) {
							smallCircle = 4 
							bigCircle = 16 
							mapScalar = 1.6 
							mapHeightRatio = 2
						} else if (windowWidth > 500 && windowWidth < 1500) {
							smallCircle =  9
							bigCircle =  36
							mapScalar = 2.1
							mapHeightRatio = 1.3
						} else if (windowWidth > 1500) {
							smallCircle =  12
							bigCircle =  48
							mapScalar = 2.1
							mapHeightRatio = 1.1
						}
					}
					scaler()
					

					//begin script when window loads
					initialize();

					//the first function called once the html is loaded
					function initialize(){

					  height100 =  window.innerHeight/1.25
					  $("#map").height(height100/mapHeightRatio )
					  width100 = $("#map").width()
					  svg = d3.select("#map").append("svg")
					  		.attr("id", "mapSVG")
					       .attr("preserveAspectRatio", "xMinYMin meet")
						   .attr("viewBox", "0 0 "+width100+ " "+height100/mapHeightRatio+"")
						   //class to make it responsive
						   .classed("svg-content-responsive", true);
					    //.style({"height": height100, "width": width100, "position": "absolute"})

					  //create map projection
					  projection = d3.geo.albers()
					  .center([-1,39])
					  .scale(height100/mapHeightRatio *mapScalar)
					  .translate([(width100)/2, (height100/mapHeightRatio )/2]);


					  path = d3.geo.path()
					    .projection(projection);

					  u = svg.append("g")
					  b = svg.append("g")

					  queue()
					    .defer(d3.json, "data/na.json")
					    .defer(d3.json, "data/borders.json")
					    .await(callback);

					    function callback(error, na, borders){
					      //svg.call(zoom);

					      b.selectAll('path')
					        .data(topojson.feature(borders, borders.objects.borders).features)
					        .enter().append("path")
					          .attr("d", path)
					          .attr("class", "borders")


					      u.selectAll("path")
					        .data(topojson.feature(na, na.objects.na).features)
					        .enter().append("path")
					          .attr("d", path)
					          .attr("class", function (d){
					            return d.properties.gu_a3
					          })
					          .attr("id", function (d){
					            return d.properties.postal
					          })
					    };
					  setData();
					  //legend();
					}

					function setData(){
					 NProgress.start()
					  svg.call(tooltip)

					  d3.csv("data/us-importers-geocoding.csv", function(importerData) {
					    importerData.forEach(function(d){
					      mapData[d.EPAID] = {"id": d.EPAID, "name": d.name, "latitude": d.lat, "longitude": d.lon, "shipments": d.shipments, "Status": {}}
					      //ECHO(d)
					    });
					    otherstuff();
					  })
					 }
					function otherstuff(){
						//console.log(mapData)
						var array = d3.values(mapData)
						array.sort(function(a,b){return b.shipments - a.shipments})
						array.forEach(function(d){
							ECHO(d)
						})
					}

/*					    d3.values(mapData).forEach(function(d){
					    	ECHO(d)
					    })*/
					  	//ECHO(mapData["TXD981053770"])

					    //run echo here
						function ECHO(data){
						  var name = data.id
						  $.ajax({
						    url:"https://ofmpub.epa.gov/echo/dfr_rest_services.get_dfr?output=JSON&p_id="+name+"", //epa id
						    dataType:"json",
						    success: function (d){
						    	//var percent = (parseFloat(d.Results.Demographics.PersonsBelowPovertyLevel.replace(/,/g, '')) / parseFloat(d.Results.Demographics.TotalPersons.replace(/,/g, '')))*100
						      if (d.Results.RCRACompliance.Sources[0].Status){
						        data = d.Results.RCRACompliance.Sources[0].Status
						        var legend = d.Results.RCRACompliance
						        delete legend.Sources
								//console.log(data, legend, name);
						      }
						        ECHOchart(data, legend, name)
						    }

						  })
						}

						function ECHOchart(data, legend, name){
							//console.log(data,legend,name)
						      var p = d3.keys(data)
						      p.shift()
						      var q = d3.values(data)
						      q.shift()

						      //console.log(data, legend, name)
						      //console.log(q, legend)
						      var status = {}
						      status[name] = {}
						      for (var i =0; i<d3.values(legend).length; i+=2){
						      	var j = i + 1
						      	var counter = d3.values(legend)[i]

						      	mapData[name]["Status"][counter]  = i == 0 ? q[0] : q[i/2]
						      	status[name][counter] = i == 0 ? q[0] : q[i/2]
						      	dates[counter] = "" //[d3.values(legend)[i]+"-"+d3.values(legend)[j]] = ""
						      }
						      //console.log(status)
						      time = d3.values(legend)[0]
						      map(status, time)

						}


					/*  svg.append('g').selectAll("rect").data("Click me").enter().append("rect")
					    .attr({"fill": "blue", "width": 20, "height": 20, "x": width100/3, "y": height100/2})
					    .on('click', filter)*/



					function map(status, time){

   	 					var name = d3.keys(status)[0];
   	 					//console.log(d3.keys(status)[0])
   	 					//console.log(status[name][time])

							    colorKey={"Significant Noncomplier": "red", "Violation": "orange", "No Viol": "black", "null": "grey"}

						        var ships = d3.values(mapData).map(function(d){return +d.shipments})
						        var max = d3.max(ships)
						        var min = d3.min(ships)
						        var mean = d3.mean(ships)
						        var shipsArray = [max, mean, min]

						        circleMax = height100/16

						        var flanMax = calcFlanneryRadius(max);
						        flanneryScale = d3.scale.linear().domain([0, flanMax]).range([smallCircle, bigCircle]);

						//console.log(mapData[name])
						if (status[name][time] === undefined){return} else{var test = [status[name][time]]}
				        var exp = svg.append("g")
				        exp.selectAll("circle")
				          .data(test)
				          .enter().append("circle")
				          .attr("class", function(d){
				          		var c = colorKey[d] != undefined ? "c"+colorKey[d].slice(1,6) : "black"
					          	return "circle circleOnMap "+c
				          })
				          .attr("id", function(d){return mapData[name].id})
				          .style("fill", function(d) {
				          	return colorKey[d]
					       })
				          .style(defaultStroke)
				          .attr("cx", function(d) {return projection([mapData[name].longitude, mapData[name].latitude])[0]; })
				          .attr("cy", function(d) { return projection([mapData[name].longitude, mapData[name].latitude])[1]; })
				          .on("mouseover", function(d){
				            tooltip.show(mapData[name], d, time);
				            highlight(mapData[name]);
				          })
				          .on("mouseout", function(d){
				            tooltip.hide(mapData[name]);
				            dehighlight(mapData[name]);
				          })
				          .on('click', function(d){
				            redraw(mapData[name]);
				          })

				        exp.selectAll("circle")
				          .transition()
				          .duration(1000)
				          .attr("r", function(d){return radiusFlannery(mapData[name].shipments)})

				        if(firstTime){firstTime = false; legend(plegend, dates, time, shipsArray)}

					}
					function legend(plegend, dates, time, shipsArray){
						d3.select("#legend").remove()
						d3.select("#rightleg")
						d3.select("#timer").remove()

					   width100 = $("#leftLegend").width()
							var scalar = window.innerWidth < 500 ? 5 : 2 //scale based on screen size
							var def = window.innerWidth < 500 ? 70 : 70
							$("#leftLegend").height(height100/scalar)

							d3.select("#leftLegend").append("div")
								.attr("class", "legDiv")
								.style({"width": width100, "height": (height100/scalar)+"px", "position": "absolute"})
							var leg = d3.select("#leftLegend").select(".legDiv").append("svg")
								.attr("id", "legend")
								.style({"width": width100, "height": (height100/scalar)+"px","position": "absolute"})



						 leg.selectAll("legcircle")
					      .data(shipsArray)
					      .enter()
					      .append("circle")
					      .style("stroke", "white")
					      //.attr("class", function(d) {return data.parent.name})
					      .style("fill", 'none')
					      .attr("r", function(d){return radiusFlannery(d)})
					      .attr("cy", function(d,i){
					      	//y position should be function of largest radius
					      	var def = window.innerWidth < 500 ? 35 : 60 //scale based on screen size
					      	var otherCirclesPosition = def + radiusFlannery(shipsArray[0]) - radiusFlannery(d)
					      	var position = i == 0 ? def : otherCirclesPosition
					      	return position
					      })
					      .attr("cx", radiusFlannery(shipsArray[0])+16)
					      function yScalar (d,i){
						 	var def = window.innerWidth < 500 ? 35 : 60 //scale based on screen size
					      	var otherCirclesPosition = def + radiusFlannery(shipsArray[0]) - radiusFlannery(d)*2
					      	return otherCirclesPosition
						 }
					     leg.selectAll("circletitle")
					      .data(["Number of shipments"])
					       .enter()
					       .append("text")
					       .text(function(d){return d})
					       .attr("text-anchor", "right")
					       .attr("x", 16)
					       .attr("y", 12)
					       .attr("class", "legendTitle")

					     var legTitles = ["Max", "Mean", "Min"]
					     leg.selectAll("circletext")
					      .data(shipsArray)
					       .enter()
					       .append("text")
					       .text(function(d, i){return legTitles[i]+": "+format(d)+" shipments"})
					       .attr("text-anchor", "right")
					       .attr("x", radiusFlannery(shipsArray[0])*2+20)
					       .attr("y",function(d,i){return yScalar(d,i)})
					       .attr("class", "legendText")

					     leg.selectAll("circlelines")
					     	.data(shipsArray)
					     	.enter()
					     	.append("line")          // attach a line
						    .style("stroke", "white")  // colour the line
						    .attr("x1", radiusFlannery(shipsArray[0])+16)     // x position of the first end of the line
						    .attr("y1",  function(d,i){
						      	//y position should be function of largest radius
						      	return yScalar(d,i)
					      	})    // y position of the first end of the line
						    .attr("x2", radiusFlannery(shipsArray[0]) * 2 +18)     // x position of the second end of the line
						    .attr("y2", function(d,i){
						      	return yScalar(d,i)
					      	}) //y position of the second end of the line

						var def = window.innerWidth < 500 ? 35 : 60 //scale based on screen size
						$("#rightLegend").height(height100/scalar)
						     d3.select("#rightLegend").append("div")
								.attr("class", "legDiv")
								.style({"width": width100, "height": (height100/scalar)+"px", "position": "absolute"})
							
							var rightleg = d3.select("#rightLegend").select(".legDiv").append("svg").attr("id", "rightleg")
								.style({"width": width100, "height": (height100/scalar)+"px","position": "absolute"})

					    rightleg.selectAll("rect")
					      .data(d3.keys(plegend))
					      .enter()
					      .append("rect")
					      .style("fill", function(d, i) {
					          return colorKey[d]
					           })
					       .attr("stroke", "white")
					      .attr("stroke-width", ".75px")
					      .attr("width", 24)
					      .attr("height", 24)
				      	  .attr("y", function(d,i){return i * 24 + 16})
					      .attr("x", 16)
					       .on("mouseover", function(d,i){
					      	var c = colorKey[d] != undefined ? "c"+colorKey[d].slice(1,6) : "black"
					      	filter(c)
					      })
					      .on("mouseout", function(d,i){
					      	svg.selectAll(".circle")
						    .transition().duration(500)
						    .style({"opacity": "1"})
					      })


					    rightleg.selectAll("compliancetext")
					      .data(d3.values(plegend))
					       .enter()
					       .append("text")
					       .text(function(d){return d})
					       .attr("text-anchor", "right")
					       .attr("x", 45)
					       .attr("y", function(d,i){return i * 24 + 26})
					       .attr("class", "legendText")
					    rightleg.selectAll("toptext")
					      .data(["Compliance status"])
					       .enter()
					       .append("text")
					       .text(function(d){return d})
					       .attr("text-anchor", "right")
					       .attr("x", 16)
					       .attr("y", 12)
					       .attr("class", "legendTitle")

					       d3.select("#timeDiv").append("text").text("Time period: ")
					       d3.select("#timeDiv").append("div").attr("id", "time").append("text").text(d3.keys(dates)[0])
					   		
						var drag = d3.behavior.drag()
						    .origin(function(d) { return d; })
						    .on("dragstart", dragstarted)
						    .on("drag", dragged)
						    .on("dragend", dragended);

						var slider = d3.select("#timeDiv").append("input")
						  .datum({})
						  .attr("type", "range")
						  .attr("value", 0)
						  .attr("min", 0)
						  .attr("max", 11)
						  .attr("step", 1)
						  .on("input", slided)
					      .attr("class", "slider")

					    function dragstarted(d) {
						  d3.event.sourceEvent.stopPropagation();
						  d3.select(this).classed("dragging", true);
						}

						function dragged(d) {
						  d3.select(this).attr("cx", d.x = d3.event.x).attr("cy", d.y = d3.event.y);
						}

						function dragended(d) {
						  d3.select(this).classed("dragging", false);
						}

						function slided(d){
						  var time = d3.select(this).property("value")
						  time = d3.keys(dates)[time]

						  svg.selectAll(".circle").remove()
						  d3.selectAll("#timeDiv").selectAll("#time").selectAll("text").remove()
						  d3.selectAll("#timeDiv").selectAll("#time").append("text").text(time)

					      d3.values(mapData).forEach(function(d){
					       		var obj = {}
					       		obj[d.id]=d["Status"]
					       		map(obj, time)
					      })
						}
					   
						NProgress.done()
						
						function filter(color) {
						  svg.selectAll(".circle")
						    .transition().duration(500)
						    .style({"opacity": ".2"})
						  svg.selectAll("."+color)
						    .transition().duration(500)
						    .style({"opacity": "1"})
						}
					
					}

/*					function zoomer() {
					  u.attr("transform", "translate(" +  zoom.translate() + ")scale(" + zoom.scale() + ")")
					      .selectAll("path").style("stroke-width", 1 / zoom.scale() + "px" );
					  b.attr("transform", "translate(" +  zoom.translate() + ")scale(" + zoom.scale() + ")")
					      .selectAll("path").style("stroke-width", 1 / zoom.scale() + "px" );
					  svg.selectAll("circle").attr("transform", "translate(" +  zoom.translate() + ")scale(" + zoom.scale() + ")")
					      .attr("r", function (d){
					      return 10//radiusFlannery(d.shipments)/(zoom.scale())
					      })
					      .style("stroke-width", 1 / zoom.scale() + "px" )
					 }*/

					//various helper functions here: calculating flannery's compensation, and svg z-indexing.
					//flannery compensation for circles. modified from here: http://codepen.io/mxfh/pen/pggXoW
					var calcFlanneryRadius = function(x, max) {
					  // Flannery Compensation formula as described here:
					  //http://www.scribd.com/doc/33408233/SUG243-Cartography-Proportional-Symbol#scribd
					  // log x * 0.57
					  // anti log
					  var flannery = 0.57;
					  var log = Math.log(x);
					  var r = log * flannery;
					  r = Math.exp(r);
					  return (r);
					};

					var radiusFlannery = function(x) {
					  return flanneryScale(calcFlanneryRadius(x));
					};
					function closest (num, arr) {
					    var curr = arr[0];
					    var diff = Math.abs (num - curr);
					    for (var val = 0; val < arr.length; val++) {
					        var newdiff = Math.abs (num - arr[val]);
					        if (newdiff < diff) {
					            diff = newdiff;
					            curr = arr[val];
					        }
					    }
					    return curr;
					}

					function highlight(data){
					  svg.selectAll(".circle")
					    .transition().duration(500)
					    .style({"opacity": ".2"})
					  svg.selectAll("#"+data.id)
					    .transition().duration(500)
					    .style({"opacity": "1"})
					}

					function dehighlight(data){
					  svg.selectAll(".circle")
					    .transition().duration(500)
					    .style({"opacity": "1"})
					};

					function redraw (base){
					  svg.selectAll(".circle").sort(function (a, b) {
					    if (a != base) return 0;               // a is not the hovered element, send "a" to the back
					    else return 1;                             // a is the hovered element, bring "a" to the front
					  });
					}
					LA()
					function LA(){
						//global variables
						var svg1, LApath, LAprojection, LAleg, fac, sq, cerritos, minorityBuffs, majWhiteBuffs
						  var tooltip1 = d3.tip()
						  .attr('class', 'd3-tip')
						  .offset([-5, 0])
						  .html(function(d) {
						    return "<span style='color:white'>" + d.RCRAName + "</span>";
						  })

					

					//begin script when window loads
					start();

					//the first function called once the html is loaded
					function start(){
						var mapScalar 
						var mapHeightRatio
						var s,l
						function scaler (){
							if (windowWidth < 500) {
								mapScalar = 1.6 
								mapHeightRatio = 2
								l =33.8
								s= 30000
							} else if (windowWidth > 500 && windowWidth < 1500) {
								mapScalar = 2.1
								mapHeightRatio = 1.3
								l=34
								s= 50000
							} else if (windowWidth > 1500) {
								mapScalar = 2.1
								mapHeightRatio = 1.
								l = 34
								s= 50000
							}
						}
						scaler()
						   //class to make it responsive
					  height100 =  window.innerHeight/1.15
					  $("#LAmap").height(height100/mapHeightRatio )
					  width100 = $("#LAmap").width()
					  svg1 = d3.select("#LAmap").append("svg")
					    .attr("id", "mapSVG")
					    .attr("height", height100/mapHeightRatio )
					    .attr("width", width100)
					    .attr("position", "absolute")
					    //.style({"height": height100, "width": width100, "position": "absolute"})

						  //create map projection
						  LAprojection = d3.geo.mercator()
						 //.center([-220,25])

						  .translate([(width100/2), (height100/2)]);


						  uLA = svg1.append("g")
						c=svg1.append('g')
						minorityBuffs = svg1.append("g")
						majWhiteBuffs = svg1.append("g")
						  fac = svg1.append("g")
						    sq = svg1.append("g")
						     bLA = svg1.append("g")
						  queue()
						    .defer(d3.json, "data/LACounties.json")
						    .defer(d3.json, "data/places.json")
						    .await(LAcallback);

						    function LAcallback(error, LACounties, comms){
						      var features = topojson.feature(LACounties, LACounties.objects.LACounties).features
							  var centroids = features.map(function (feature){
							  	//if (d3.geo.centroid(feature)){}
							    return d3.geo.centroid(feature);
							  });
							  //console.log(centroids)
							  var center = centroids[0]
							 // console.log(center)
							  LAprojection.center([-118.20,l ]).scale(s)
	  						  LApath = d3.geo.path()
							    .projection(LAprojection);




						      uLA.selectAll("path")
						        .data(topojson.feature(LACounties, LACounties.objects.LACounties).features)
						        .enter().append("path")
						          .attr("d", LApath)
						          .attr("class", function (d){
						            return "MEX"
						          })
						       c.selectAll("path")
						        .data(topojson.feature(comms, comms.objects.places).features)
						        .enter().append("path")
						          .attr("d", LApath)
						          .attr("class", function (d){
						            return "MEX"
						          })
						        bLA.selectAll("text")
						        .data(topojson.feature(comms, comms.objects.places).features)
						        .enter().append("text")
						           .attr('x', function(d){
						           	var c = d3.geo.centroid(d)
						           	return LAprojection(c)[0]
						           })
						           .attr('y', function(d){
						           	var c = d3.geo.centroid(d)
						           	return LAprojection(c)[1]
						           })
						          .text(function(d){if (d.properties.CENSUSAREA > 7){return d.properties.NAME}})
						          .attr("font-size", function(d){
						          	if (d.properties.CENSUSAREA >7 && d.properties.CENSUSAREA <30){return "8"}
						          	if (d.properties.CENSUSAREA >30 && d.properties.CENSUSAREA <60){return "12"}
						          	if (d.properties.CENSUSAREA >60){return "14"}
						          })

						        cerritos = topojson.feature(comms, comms.objects.places).features.filter(function(d){return d.properties.NAME == "Cerritos"})

						    };
						  setData();
						}

						function setData(){
						  NProgress.start();
						  svg1.call(tooltip1)

						  d3.csv("data/LQG.csv", function(data) {
						   //color facilities by RCRAQtrsInNC and make ours bigger...
						   var importers = ["CAD008302903","CAD060398229","CAD066233966"]
						    var totalFacilities = data.length
						    console.log(cerritos)

						  	var feature = turf.feature(cerritos[0].geometry);
						  	feature = [feature]
						    feature = turf.featureCollection(feature)

						  	var feats = []
						  	data.forEach(function(d){
						  		feats.push(turf.point([Number(d.FacLong), Number(d.FacLat)], d))
						  	})
						  	feats = feats.filter(function(d){return d.properties.FacLong == -118.049551})

						  	feats = turf.featureCollection(feats);
						  	//console.log(feats)
						        //console.log(cerritos)
						        //var cfeat = [turf.point(cerritos[0].geometry, {name: 'Location A'})]

						    var thePoint = [-118.049551, 3.066965]
						    var test = {
							  "type": "FeatureCollection",
							  "features": [
							    {
							      "type": "Feature",
							      "properties": {},
							      "geometry": {
							        "type": "Point",
							        "coordinates": thePoint
							      }
							    }, {
							      "type": "Feature",
							      "properties": {},
							      "geometry": {
							        "type": "Point",
							        "coordinates": thePoint
							      }
							    }
							  ]
							};

							var cerrito = { "type": "Feature", "properties": { "GEO_ID": "1600000US0612552", "STATE": "06", "PLACE": "12552", "NAME": "Cerritos", "LSAD": "city", "CENSUSAREA": 8.725, "Shape_STAr": 246572616.215, "Shape_STLe": 118080.76087 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ -118.028887999836968, 33.882629000032836 ], [ -118.028681155924062, 33.873316057140322 ], [ -118.028772420533898, 33.873315497179512 ], [ -118.028772240680681, 33.873285861714471 ], [ -118.028761755934283, 33.872110544548683 ], [ -118.028717388339928, 33.866241889545748 ], [ -118.028792999919617, 33.866240999737094 ], [ -118.035119980483032, 33.866020314132811 ], [ -118.035591866241305, 33.866016576824734 ], [ -118.035818357122793, 33.866015383719059 ], [ -118.035983055259194, 33.866014509762415 ], [ -118.036147752309518, 33.8660136310734 ], [ -118.036148847050185, 33.866013630744973 ], [ -118.037598000415159, 33.866012999764315 ], [ -118.037597881676277, 33.866006075268416 ], [ -118.037624048408333, 33.866005950805395 ], [ -118.037575372135976, 33.86388909386703 ], [ -118.037562273006358, 33.863314044528884 ], [ -118.037540454019165, 33.86236905889217 ], [ -118.037606327718564, 33.862368507358319 ], [ -118.037979218998117, 33.862365367620129 ], [ -118.039225723817765, 33.862354938919154 ], [ -118.039350888987059, 33.862353881198253 ], [ -118.039574899257346, 33.862352021930512 ], [ -118.039782079613744, 33.862350277788913 ], [ -118.039963633664883, 33.86234876086143 ], [ -118.040128290807047, 33.862347360175178 ], [ -118.040309482829713, 33.862345842847105 ], [ -118.040474501989308, 33.862344468612086 ], [ -118.040655693999881, 33.862342951664914 ], [ -118.040820383551591, 33.862341577067333 ], [ -118.041001575536058, 33.862340031653119 ], [ -118.041166594672802, 33.862338656470193 ], [ -118.041522357556943, 33.86233567659459 ], [ -118.041555328956449, 33.86233539026582 ], [ -118.04158826686961, 33.86233513188656 ], [ -118.041667975939376, 33.862334444439369 ], [ -118.041884905794092, 33.862332720355347 ], [ -118.041879045435579, 33.861679208477895 ], [ -118.041878661410877, 33.861635133586446 ], [ -118.041877779312557, 33.861530668241585 ], [ -118.041877117333357, 33.861453668349675 ], [ -118.041875622573116, 33.86128871703405 ], [ -118.041874434390664, 33.861151243763409 ], [ -118.04187324622599, 33.86101379844164 ], [ -118.041872056970632, 33.860876325175354 ], [ -118.041870868813831, 33.86073887985755 ], [ -118.041869613384449, 33.860598713795902 ], [ -118.041868145114535, 33.860428321848957 ], [ -118.04186653720933, 33.860242294996745 ], [ -118.041865207827939, 33.860088170827417 ], [ -118.041854341147129, 33.858838905318855 ], [ -118.041854202456747, 33.8588251662961 ], [ -118.041853336146318, 33.858724067229424 ], [ -118.046188000416265, 33.858768000030139 ], [ -118.046186748924541, 33.858687270846296 ], [ -118.046200389259099, 33.858687186283355 ], [ -118.046186014574644, 33.857785576122218 ], [ -118.046163305133547, 33.856407842019244 ], [ -118.046152668322023, 33.855664249739483 ], [ -118.046110568906883, 33.853648342941831 ], [ -118.04611084525645, 33.853610518941778 ], [ -118.047386006877716, 33.853589266798537 ], [ -118.048728911992114, 33.853575817845297 ], [ -118.049101279351319, 33.853572084045524 ], [ -118.049609117085879, 33.853568105873244 ], [ -118.05041069369274, 33.85356182224956 ], [ -118.050410420346836, 33.853533108261765 ], [ -118.050405543181043, 33.853033914419463 ], [ -118.050399505365675, 33.852413871433946 ], [ -118.050398863336483, 33.852345210650313 ], [ -118.050398171596498, 33.852276536365281 ], [ -118.050395364025476, 33.851988181322085 ], [ -118.050394029188837, 33.851850845358634 ], [ -118.0503926949755, 33.851712741307736 ], [ -118.050392161744654, 33.85165789437027 ], [ -118.050391361261092, 33.851575460340229 ], [ -118.050390027518588, 33.85143812528397 ], [ -118.050388692733023, 33.851300845222546 ], [ -118.050387326600486, 33.851163537229304 ], [ -118.050386025351628, 33.851026311248653 ], [ -118.050383464434944, 33.850765297230296 ], [ -118.050382854871259, 33.850696677914939 ], [ -118.050382130718276, 33.850627962186074 ], [ -118.050379462200738, 33.850353264157327 ], [ -118.050375711015633, 33.849966976406435 ], [ -118.053892316950595, 33.849848893473471 ], [ -118.054516818610182, 33.849844709837626 ], [ -118.054590588300428, 33.849844214857512 ], [ -118.054722683312946, 33.849843325535495 ], [ -118.054722478592268, 33.849821017688754 ], [ -118.054723000454345, 33.849821000322997 ], [ -118.054716601109988, 33.84918063060708 ], [ -118.054705566290011, 33.84797815444341 ], [ -118.054700499743277, 33.847440996646093 ], [ -118.054689180780002, 33.846217950124199 ], [ -118.054776697011036, 33.846215943261306 ], [ -118.056046115878445, 33.846208952311493 ], [ -118.057043290604042, 33.846203779261714 ], [ -118.058278859805654, 33.846196339066665 ], [ -118.059040364775043, 33.846192198135391 ], [ -118.059040016006662, 33.846124967096777 ], [ -118.060671000051059, 33.846177999563118 ], [ -118.06338900026266, 33.84615300022368 ], [ -118.065990999985502, 33.846131999565429 ], [ -118.072090999789609, 33.846084000390604 ], [ -118.081980999696881, 33.84600600023699 ], [ -118.08202099972182, 33.849640999592488 ], [ -118.086370999820048, 33.84963300020425 ], [ -118.086368999500323, 33.845970999859297 ], [ -118.086803999550057, 33.845968999565606 ], [ -118.092398000044483, 33.845925000070416 ], [ -118.098939000208091, 33.845875000320532 ], [ -118.09921100033479, 33.845875999972094 ], [ -118.100211999558695, 33.848065999601282 ], [ -118.101733000020189, 33.853478000147867 ], [ -118.103054999461108, 33.858318000193101 ], [ -118.108316999981298, 33.858371000240467 ], [ -118.108428999611235, 33.865586999998889 ], [ -118.108536000018645, 33.872715000058548 ], [ -118.106910000099688, 33.872711000330419 ], [ -118.106974000434647, 33.872942999957047 ], [ -118.108003999515034, 33.876790000315744 ], [ -118.108546999473432, 33.87984299979373 ], [ -118.108563999545112, 33.886942999906346 ], [ -118.108417999623612, 33.886938999677412 ], [ -118.108160000123547, 33.886939999577628 ], [ -118.104370000310539, 33.886968000366373 ], [ -118.10425600018489, 33.887381999848436 ], [ -118.100572999781591, 33.887395000134291 ], [ -118.100547000184832, 33.886982999787215 ], [ -118.09988300024132, 33.886990000446659 ], [ -118.09988699995877, 33.88740200023738 ], [ -118.095532999746752, 33.887425999876328 ], [ -118.095537999774862, 33.88211299995568 ], [ -118.095466999498029, 33.880314000301986 ], [ -118.09541300051032, 33.87852799995575 ], [ -118.09380399970361, 33.87855300002056 ], [ -118.091064999993833, 33.878859999883623 ], [ -118.091085999524168, 33.88032599969636 ], [ -118.087806000080136, 33.880338000092316 ], [ -118.087776999582886, 33.876750000365199 ], [ -118.091033999660468, 33.876416000198674 ], [ -118.090991999619234, 33.8729809995612 ], [ -118.090990999805427, 33.865683999854205 ], [ -118.090901000460704, 33.861313000431181 ], [ -118.089982999574389, 33.861319000332337 ], [ -118.089973999821112, 33.860224999604107 ], [ -118.086482999908952, 33.860250000054762 ], [ -118.086474999522395, 33.85842399971353 ], [ -118.086450000287186, 33.856003999941251 ], [ -118.082092000279232, 33.856040000312333 ], [ -118.082110999618877, 33.860495000048402 ], [ -118.078810999737044, 33.85847399969186 ], [ -118.075151000444947, 33.856228000446528 ], [ -118.072288000163809, 33.856968999864691 ], [ -118.072240999730425, 33.854512000252328 ], [ -118.070459000360898, 33.853411000398474 ], [ -118.068915000458702, 33.853423000135727 ], [ -118.069006999624165, 33.858557000390903 ], [ -118.071223999523767, 33.858534999730935 ], [ -118.070178000376117, 33.860339000416801 ], [ -118.070294000094378, 33.865815999626136 ], [ -118.070313999561719, 33.869456999865655 ], [ -118.0724970001271, 33.869453999697591 ], [ -118.070334999534126, 33.869835999844774 ], [ -118.070384000066582, 33.873111000077408 ], [ -118.08004299960642, 33.873053999696083 ], [ -118.07964899968843, 33.876462000326832 ], [ -118.07927399950583, 33.87674000007636 ], [ -118.075086999544695, 33.8767670000233 ], [ -118.074840999957502, 33.876769000254562 ], [ -118.074895000371953, 33.880383000438925 ], [ -118.072708000101883, 33.880391999903772 ], [ -118.072825000397017, 33.885832999950722 ], [ -118.068447000489812, 33.885887999807679 ], [ -118.06846999965768, 33.887112000073593 ], [ -118.068475999850449, 33.887559000148578 ], [ -118.066323999719302, 33.887571000149549 ], [ -118.06528799964515, 33.887577000140304 ], [ -118.064333000067364, 33.887581999621858 ], [ -118.06408499971505, 33.887165000021376 ], [ -118.055376000176864, 33.887216000217663 ], [ -118.055382999695453, 33.887649999683752 ], [ -118.046538999840678, 33.887713000322073 ], [ -118.038572000150765, 33.88777300012908 ], [ -118.028887999836968, 33.882629000032836 ] ] ] ] } }

							var cerritoPolygon = turf.polygon(cerrito.geometry.coordinates[0]) //turn cerrito multipolygon into polygon

							var cerritoFeatureCollection = turf.featureCollection([cerritoPolygon]) //create a feature collection

						  	var ptsWithin = turf.within(test, cerritoFeatureCollection); //see if test points are within the cerrito featureCollection

						  	var pt = turf.point(thePoint);

						  	var isInside = turf.inside(pt, cerritoPolygon);

						    //console.log(ptsWithin)//returns a feature with an empty features array
						    //console.log(isInside)//returns true - thePoint is in cerrito


						    //console.log(data)

						    var dump2 = data.map(function(d){return Number(d.FacPercentMinority)})

						    var colorMin = d3.scale.threshold()
						    .domain([50, 80])
						    .range(["#3182bd", "#ffeda0", "#f03b20"])

						    var dump = data.map(function(d){return Number(d.FacPercentMinority)})
						    var med = d3.median(dump)
						    var aboveMedianMinoritySites = data.filter(function(d){return Number(d.FacPercentMinority) > 72.5})  //72.5 is %minority across entire county based on total pop numbers from census
						    var aboveMedianMinoritySites12SNC = aboveMedianMinoritySites.filter(function(d){return Number(d.RCRAQtrsInSNC) > 0})

						    var feats = [], buffs = []
						  	aboveMedianMinoritySites12SNC.forEach(function(d){
						  		feats.push(turf.point([Number(d.FacLong), Number(d.FacLat)], d))
						  	})
						    feats.forEach(function(d){
						    	var x = turf.circle(d, 3, 64, "miles")
						    	x.properties = d.properties
						    	x.properties.dissolve = "yes"
						    	buffs.push(x)
						    })
						    var featsMin = feats
						    var FC = turf.featureCollection(buffs)
						    var dissolved = turf.dissolve(FC, 'combine');
						    minorityBuffs.selectAll("path")
						        .data(buffs)
						        .enter().append("path")
						          .attr("d", LApath)
						          .style("fill", function(d){
						          	return "#f8b864" //colorMin(Number(d.properties.FacPercentMinority))
						          })
						          //.style({"stroke": "black", "stroke-width": ".5px"})


						    var majWhiteSites = data.filter(function(d){return Number(d.FacPercentMinority) < 50})
						    //console.log(majWhiteSites)
						    var majWhite12SNC = majWhiteSites.filter(function(d){return Number(d.RCRAQtrsInSNC) > 0})
						    console.log(aboveMedianMinoritySites12SNC, majWhite12SNC)
						    var feats = [], buffs = []
						  	majWhite12SNC.forEach(function(d){
						  		feats.push(turf.point([Number(d.FacLong), Number(d.FacLat)], d))
						  	})
						    feats.forEach(function(d){
						    	var x = turf.circle(d, 3, 64, "miles")
						    	x.properties = d.properties
						    	x.properties.dissolve = "yes"
						    	buffs.push(x)
						    })
						    var FC = turf.featureCollection(buffs)
						    var dissolved = turf.dissolve(FC, 'combine');
						    majWhiteBuffs.selectAll("path")
						        .data(buffs)
						        .enter().append("path")
						          .attr("d", LApath)
						          .style("fill", function(d){
						          	return colorMin(Number(d.properties.FacPercentMinority))
						          })
						          //.style({"stroke": "black", "stroke-width": ".5px"})



						    dump = data.map(function(d){return Number(d.RCRAQtrsInNC)})

						    var max = d3.max(dump)
						    var min = d3.min(dump)
						    med = d3.median(dump)

						    var color = d3.scale.threshold()
						    .domain([.1, 3])
						    .range(["#3182bd", "#ffeda0", "#f03b20"])


						    var dump2 = data.map(function(d){return Number(d.FacPercentMinority)})

						    var fmax = d3.max(dump2)
						    var fmin = d3.min(dump2)
						    var fmed = d3.median(dump2)
						    flanneryScale = d3.scale.sqrt()
						    .domain([0, calcFlanneryRadius(fmax)])
						    .range([1,12])

						 	var squares = data.filter(function(d){return d.SourceID == "CAD008302903" || d.SourceID == "CAD060398229" || d.SourceID == "CAD066233966"})
						    data = data.filter(function(d){return d.SourceID != "CAD008302903" && d.SourceID != "CAD060398229" && d.SourceID != "CAD066233966"})
						    data.sort(function(a,b){return a.RCRAQtrsInNC - b.RCRAQtrsInNC})

						    fac.selectAll("circle")
						      .data(featsMin)
						      .enter().append("circle")
						      //.attr("class", function(d) {return d.id+" "+d.state+d.years+" "+d.name})
						      .attr("id", function(d){return d.properties.SourceID})
						      //.style("fill", function(d){return color(d.properties.RCRAQtrsInNC)})
						      .style("fill-opacity",1)/* function (d){
						      	if (d.RCRAQtrsInNC > 0 && d.SourceID != "CAD008302903" && d.SourceID != "CAD060398229" && d.SourceID != "CAD066233966"){return .2}
						      	else if (importers.includes(d.SourceID)){return 1}
						      		else{return .1}

						      })*/
						      .style(defaultStroke)
						      .attr("r", 2)//function(d){return radiusFlannery(d.FacPercentMinority)})
						      .attr("cx", function(d) {return LAprojection([d.properties.FacLong, d.properties.FacLat])[0]; })
						      .attr("cy", function(d) { return LAprojection([d.properties.FacLong, d.properties.FacLat])[1]; })
						      .on("mouseover", function(d){
						        tooltip1.show(d.properties);
						      })
						      .on("mouseout", function(d){
						        tooltip1.hide(d.properties);
						      })
						    //  .on("mouseover", function(d){console.log(d)})
						    whiteDot = svg1.append('g')
						    whiteDot.selectAll("circle")
						      .data(feats)
						      .enter().append("circle")
						      //.attr("class", function(d) {return d.id+" "+d.state+d.years+" "+d.name})
						      .attr("id", function(d){return d.properties.SourceID})
						      //.style("fill", function(d){return color(d.properties.RCRAQtrsInNC)})
						      .style("fill-opacity",1)/* function (d){
						      	if (d.RCRAQtrsInNC > 0 && d.SourceID != "CAD008302903" && d.SourceID != "CAD060398229" && d.SourceID != "CAD066233966"){return .2}
						      	else if (importers.includes(d.SourceID)){return 1}
						      		else{return .1}

						      })*/
						      .style(defaultStroke)
						      .attr("r", 2)//function(d){return radiusFlannery(d.FacPercentMinority)})
						      .attr("cx", function(d) {return LAprojection([d.properties.FacLong, d.properties.FacLat])[0]; })
						      .attr("cy", function(d) { return LAprojection([d.properties.FacLong, d.properties.FacLat])[1]; })
						      .on("mouseover", function(d){
						        tooltip1.show(d.properties);
						      })
						      .on("mouseout", function(d){
						        tooltip1.hide(d.properties);
						      })

						     sq.selectAll("rect")
						      .data(squares)
						      .enter().append("rect").attr("class", "rect")
						      //.attr("class", function(d) {return d.id+" "+d.state+d.years+" "+d.name})
						      .attr("id", function(d){return d.SourceID})
						      .style("fill", function(d){return "black"})//color(d.RCRAQtrsInNC)})
						      .attr("width", 12)
						      .attr("height", 12)
						      .attr("x", function(d) {return LAprojection([d.FacLong, d.FacLat])[0] - 6}) //need to center
						      .attr("y", function(d) { return LAprojection([d.FacLong, d.FacLat])[1] - 6 })
						      .on("mouseover", function(d){
						        tooltip1.show(d);
						      })
						      .on("mouseout", function(d){
						        tooltip1.hide(d);
						      })


						  var stringwork2 = ["3 mile buffer around 'Large quantity generators' in significant non-compliance within past 3 years"]
						  var circleData = [["In majority white areas - 1", "#3182bd"], ["In areas w/ minority population greater than county-wide rate (72.5%) - 30", "#f8b864"]]
						  //var circleSpot = [34, 53, 58, 34, 54, 57]

						 // var legendKey = ["Max Imports", "Mean Imports", "Min Imports","Max Exports", "Mean Exports", "Min Exports"]

							width100 = $(".leg").width()
							//height100=$(".map").height()
							var scalar = window.innerWidth < 500 ? 3 : 3 //scale based on screen size
							$(".leg").height(height100/scalar)
							d3.select(".leg").append("div")
								.attr("class", "LAlegDiv")
								.style({"width": width100, "height": (height100/scalar)+"px", "position": "absolute"})
							LAleg = d3.selectAll(".LAlegDiv").append("svg")
								.attr("id", "LAlegSVG")
								.style({"width": width100, "height": (height100/scalar)+"px","position": "absolute"})

							 LAleg.selectAll("circle")
						      .data(circleData)
						      .enter()
						      .append("circle")
						      .style(defaultStroke)
						      //.attr("class", function(d) {return data.parent.name})
						      .style("fill", function(d){return d[1]})
						      .style("fill-opacity", 1)
						      .attr("r", 5)//function(d){return radiusFlannery(d[0])})
						      .attr("cy", function(d,i){
						      	return i*20+42
						      })
						      .attr("cx", 5+20)


						     LAleg.selectAll("circletitle")
						      .data(["3 mile buffer around 'Large quantity generators'", "in significant non-compliance w/in past 3 years"])
						       .enter()
						       .append("text")
						       .text(function(d){return d})
						       .attr("text-anchor", "right")
						       .attr("x", 16)
						       .attr("y", function(d,i){return 12*i + 15}) // + height100/1.5
						       .attr("class", "legendTitle")


						     //here, replace circleData with biggest individual shipment
						     LAleg.selectAll("circletext")
						      .data(circleData)
						       .enter()
						       .append("text")
						       .text(function(d, i){return d[0]})
						       .attr("text-anchor", "right")
						       .attr("x", 15+20)
						       .attr("y",function(d,i){
						       	return i*20+46
						       })
						       .attr("class", "legendText")

						     LAleg.selectAll('recto')
						     	.data([0]).enter().append("rect")
						     	.attr("width", 20)
						     	.attr("height", 20)
						     	.attr("x", 20)
						     	.attr('y', 115)
						     	.attr("fill", "black")
						    LAleg.selectAll('rectoText')
						     	.data([0]).enter().append("text")
						     	.text("Hazardous waste importers")
						     	.attr("x", 20)
						     	.attr('y', 105)
						     	.attr("text-anchor", "right")
						     	.attr("class", "legendTitle")


						})

						NProgress.done()
						};

					}
				</script>
			<div class="container"><div class="col-md-12"><p> </p></div></div>
          <div class="container"><div class="col-md-12"><p> </p></div></div>
          <div class="container"><div class="col-md-12"><p> </p></div></div>
<div class="container">
		<div class="col-md-4">
		<h4>Continue to next story:</h4>
			<div class="thumbnail portfolio-thumbnail center-block" id = "image">
					<a href = "demographics.html"><img src="img/demographics2.png"
					alt="Alberta Tar Sands"/>
					 <p class="imgDescription-col4">What are the communities near waste import facilities?</p>
					</a>
			</div>
	</div>
			<div class="col-md-4">
			<h4>Back to Story selection:</h4>
				<div class="thumbnail portfolio-thumbnail center-block" id = "image">
						<a href = "stories.html"><img src="img/storiesLanding.png"
						alt="Alberta Tar Sands"/>
						 <p class="imgDescription-col4">Story selection</p>
						</a>
				</div>
		</div>
		<div class="col-md-4">
			<h4>Further exploration:</h4>
				<div class="thumbnail portfolio-thumbnail center-block" id = "image">
						<a href = "hmm/index.html" target = "blank"><img src="img/hmmLanding.png"
						alt="Alberta Tar Sands"/>
						 <p class="imgDescription-col4">HazMatMapper</p>
						</a>
				</div>
		</div>
		
</div> 
		<br><br>
		<footer class="footer">
				<div w3-include-html="footer.html"></div>
		</footer>
	</body>


</html>
